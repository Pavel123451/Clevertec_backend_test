
---
# Тестовое задание 1 на курс по Backend в Clevertec

# Check Generation System

## Описание проекта

Check Generation System - это программа для формирования чеков на основе заданного списка продуктов, скидочных карт и баланса дебетовой карты. Основная цель проекта - автоматизация процесса создания чеков для покупок, включая учет скидок и проверку баланса.

## Основные возможности

- Парсинг входных данных о продуктах и скидочных картах.
- Расчет стоимости продуктов с учетом возможных скидок.
- Формирование итогового чека в формате CSV.
- Вывод расширенной информации о чеке в консоль, включая скидки по оптовым закупкам и дисконтным картам.

## Структура проекта и описание классов

### `CheckRunner`
Главный класс для запуска программы. Выполняет следующие задачи:
- Парсинг аргументов командной строки.
- Чтение данных о продуктах и скидочных картах из CSV-файлов.
- Инициализация сервиса для генерации чека.
- Обработка возможных исключений и запись ошибок в файл `result.csv`.

### `CheckService`
Класс, отвечающий за бизнес-логику программы. Выполняет следующие функции:
- Парсинг аргументов продуктов.
- Расчет скидок.
- Формирование чека в формате CSV и вывод информации в консоль.

### `CsvUtil`
Утилитный класс для работы с CSV. Содержит методы для:
- Парсинга аргументов командной строки.
- Записи данных в CSV-файл.

### `CsvReaderService`
Сервис для чтения данных из CSV-файлов. Содержит методы для:
- Чтения списка продуктов из файла.
- Чтения списка скидочных карт из файла.

### `BadRequestException`
Класс исключения, выбрасываемого при неверных входных данных (неверно заполненные аргументы, ошибки количества, отсутствие продуктов в CSV, ошибки в файлах с продуктами и скидочными картами).

### `NotEnoughMoneyException`
Класс исключения, выбрасываемого при недостатке средств на дебетовой карте.

### `Product`
Модель данных для представления продукта. Содержит поля:
- `id` - уникальный идентификатор продукта.
- `description` - описание продукта.
- `price` - цена продукта.
- `quantityInStock` - количество продукта на складе.
- `isWholesaleProduct` - флаг, указывающий, является ли продукт оптовым.

### `ProductFactory`
Фабричный класс для создания объектов `Product`. Содержит метод:
- `public static Product createProduct(ProductType type, String[] parts) ` - создает и возвращает объект `Product` на основе переданных значений.  
- На данный момент существует только один `ProductType` - `STANDARD`, но одним из условий задачи было обратить внимание на устойчивость к изменениям (последующая поддержка этой программы) в логике, поэтому было решено добавить данный параметр.

### `DiscountCard`
Модель данных для представления скидочной карты. Содержит поля:
- `number` - номер карты.
- `discountPercentage` - процент скидки.

### `DiscountCardFactory`
Фабричный класс для создания объектов `DiscountCard`. Содержит метод:
- `public static DiscountCard createDiscountCard(DiscountCardType type, String[] parts) ` - создает и возвращает объект `DiscountCard` на основе переданных значений.
- На данный момент существует только один `DiscountCardType` - `STANDARD`, но одним из условий задачи было обратить внимание на устойчивость к изменениям (последующая поддержка этой программы) в логике, поэтому было решено добавить данный параметр.

## Инструкция по запуску

### Компиляция проекта

Для компиляции проекта выполните следующую команду:

```sh
javac -d out -sourcepath src src/main/java/ru/clevertec/check/CheckRunner.java
```

### Запуск проекта

Для запуска проекта выполните следующую команду:

```sh
java -cp out main.java.ru.clevertec.check.CheckRunner 3-1 2-5 5-1 discountCard=1111 balanceDebitCard=100
```

В данном примере передаются следующие аргументы:
- `3-1 2-5 5-1` - продукты и их количество.
- `discountCard=1111` - номер скидочной карты.
- `balanceDebitCard=100` - баланс дебетовой карты.

## Пример использования

После выполнения команды для запуска проекта, программа создаст файл `result.csv` с результатами расчета, а также выведет расширенную информацию о чеке в консоль.

---
